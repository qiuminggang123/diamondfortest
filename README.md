# Diamond2 - AURA LOOP ç ä¸²è®¾è®¡å¹³å°

ä¸€ä¸ªç°ä»£åŒ–çš„ç ä¸²æ‰‹é“¾å®šåˆ¶è®¾è®¡å¹³å°ï¼ŒåŸºäº Next.js 14 å’Œ React 18 æ„å»ºã€‚

## ğŸš€ ç‰¹æ€§

- **å®æ—¶è®¾è®¡é¢„è§ˆ**ï¼šä½¿ç”¨ Pixi.js å®ç°æµç•…çš„ 2D ç ä¸²æ¸²æŸ“
- **æ™ºèƒ½å¸ƒå±€ç®—æ³•**ï¼šè‡ªåŠ¨è®¡ç®—æ‰‹é“¾å‘¨é•¿å’Œç å­æ’åˆ—
- **æ‹–æ‹½äº¤äº’**ï¼šç›´è§‚çš„ç å­æ·»åŠ å’Œä½ç½®è°ƒæ•´
- **å“åº”å¼è®¾è®¡**ï¼šå®Œç¾é€‚é…æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- **ç®¡ç†å‘˜åå°**ï¼šå®Œæ•´çš„ç´ æç®¡ç†å’Œè®¢å•å¤„ç†ç³»ç»Ÿ
- **ç”¨æˆ·è®¤è¯**ï¼šåŸºäº NextAuth.js çš„å®‰å…¨ç™»å½•ç³»ç»Ÿ

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**ï¼šNext.js 14 (App Router)
- **è¯­è¨€**ï¼šTypeScript
- **çŠ¶æ€ç®¡ç†**ï¼šZustand
- **UI åº“**ï¼šTailwind CSS + Framer Motion
- **å›¾å½¢å¼•æ“**ï¼šPixi.js
- **åç«¯**ï¼šNext.js API Routes
- **æ•°æ®åº“**ï¼šPostgreSQL (é€šè¿‡ Prisma ORM)
- **è®¤è¯**ï¼šNextAuth.js
- **éƒ¨ç½²**ï¼šVercel

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

- Node.js >= 18
- npm >= 8

## ğŸ”§ æœ¬åœ°å¼€å‘

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd diamond2
```

### 2. å®‰è£…ä¾èµ–

```bash
npm install
```

### 3. ç¯å¢ƒå˜é‡é…ç½®

åˆ›å»º `.env.local` æ–‡ä»¶ï¼š

```env
# æ•°æ®åº“è¿æ¥
DATABASE_URL=your_database_url

# NextAuth é…ç½®
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your_secret_key

# Resend é‚®ä»¶æœåŠ¡ï¼ˆå¯é€‰ï¼‰
RESEND_API_KEY=your_resend_api_key
```

### 4. æ•°æ®åº“è®¾ç½®

```bash
# ç”Ÿæˆ Prisma Client
npx prisma generate

# è¿è¡Œè¿ç§»
npx prisma migrate dev --name init

# ï¼ˆå¯é€‰ï¼‰å¡«å……åˆå§‹æ•°æ®
npm run seed
```

### 5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

è®¿é—® [http://localhost:3000](http://localhost:3000)

## ğŸ¯ ä½¿ç”¨æŒ‡å—

### ç”¨æˆ·åŠŸèƒ½
1. æµè§ˆç å­åº“ï¼ŒæŒ‰ç±»åˆ«ç­›é€‰
2. ç‚¹å‡»ç å­æ·»åŠ åˆ°è®¾è®¡åŒº
3. æ‹–æ‹½è°ƒæ•´ç å­é¡ºåºå’Œä½ç½®
4. å®æ—¶æŸ¥çœ‹æ‰‹é“¾å‘¨é•¿å’Œæ€»ä»·
5. ä¿å­˜è®¾è®¡æˆ–ä¸‹å•åˆ¶ä½œ

### ç®¡ç†å‘˜åŠŸèƒ½
è®¿é—® `/admin` é¡µé¢ï¼š
- ç®¡ç†ç å­ç´ æåº“
- å¤„ç†ç”¨æˆ·è®¢å•
- ç®¡ç†å•†å“åˆ†ç±»
- æŸ¥çœ‹ç³»ç»Ÿç»Ÿè®¡

## ğŸ› å¸¸è§é—®é¢˜

### 1. Hydration é”™è¯¯
å¦‚æœé‡åˆ°æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯æ¸²æŸ“ä¸ä¸€è‡´çš„é—®é¢˜ï¼š
- æ£€æŸ¥ç»„ä»¶æ˜¯å¦æ­£ç¡®ä½¿ç”¨äº†å®¢æˆ·ç«¯æŒ‡ä»¤
- ç¡®ä¿çŠ¶æ€åœ¨æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä¿æŒä¸€è‡´
- æŸ¥çœ‹æ§åˆ¶å°å…·ä½“é”™è¯¯ä¿¡æ¯

### 2. localStorage å­˜å‚¨è¶…é™ (QuotaExceededError)
å½“å‡ºç°å­˜å‚¨ç©ºé—´ä¸è¶³é”™è¯¯æ—¶ï¼š

**ä¸´æ—¶è§£å†³æ–¹æ¡ˆï¼š**
åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰§è¡Œï¼š
```javascript
// æ¸…ç†æ‰€æœ‰ç›¸å…³å­˜å‚¨
Object.keys(localStorage).filter(k => k.includes('diamond-store')).forEach(k => localStorage.removeItem(k))

// æˆ–è€…æ¸…ç©ºæ‰€æœ‰å­˜å‚¨ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
localStorage.clear()
```

**é•¿æœŸè§£å†³æ–¹æ¡ˆï¼š**
é¡¹ç›®å·²ä¼˜åŒ–å­˜å‚¨ç­–ç•¥ï¼Œæ–°ç‰ˆæœ¬åªä¼šå­˜å‚¨å¿…è¦çš„è‡ªå®šä¹‰æ•°æ®ï¼Œä¸å†å­˜å‚¨å®Œæ•´çš„å›¾ç‰‡æ•°æ®ã€‚

### 3. æ•°æ®åº“è¿æ¥é—®é¢˜
- ç¡®è®¤ `.env.local` ä¸­çš„ `DATABASE_URL` é…ç½®æ­£ç¡®
- æ£€æŸ¥æ•°æ®åº“æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ
- è¿è¡Œ `npx prisma migrate status` æŸ¥çœ‹è¿ç§»çŠ¶æ€

### 4. æ„å»ºå¤±è´¥
- ç¡®ä¿ Node.js ç‰ˆæœ¬ >= 18
- æ¸…ç† node_modules å¹¶é‡æ–°å®‰è£…
- æ£€æŸ¥ TypeScript ç±»å‹é”™è¯¯

## ğŸ“ é¡¹ç›®ç»“æ„

```
diamond2/
â”œâ”€â”€ app/                    # Next.js App Router é¡µé¢
â”‚   â”œâ”€â”€ admin/             # ç®¡ç†å‘˜åå°
â”‚   â”œâ”€â”€ api/               # API è·¯ç”±
â”‚   â””â”€â”€ ...                # å…¶ä»–é¡µé¢
â”œâ”€â”€ components/            # React ç»„ä»¶
â”‚   â”œâ”€â”€ BeadLibrary.tsx    # ç å­åº“ç»„ä»¶
â”‚   â”œâ”€â”€ PixiStage.tsx      # Pixi.js æ¸²æŸ“èˆå°
â”‚   â””â”€â”€ ...                # å…¶ä»–ç»„ä»¶
â”œâ”€â”€ lib/                   # æ ¸å¿ƒåº“æ–‡ä»¶
â”‚   â”œâ”€â”€ store.ts          # Zustand çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ types.ts          # TypeScript ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ ...               # å…¶ä»–å·¥å…·å‡½æ•°
â”œâ”€â”€ prisma/                # Prisma æ•°æ®åº“ schema
â”œâ”€â”€ public/                # é™æ€èµ„æº
â””â”€â”€ scripts/               # å·¥å…·è„šæœ¬
```

## ğŸš€ éƒ¨ç½²

### Vercel éƒ¨ç½²

1. æ¨é€ä»£ç åˆ° GitHub
2. åœ¨ Vercel å¯¼å…¥é¡¹ç›®
3. é…ç½®ç¯å¢ƒå˜é‡
4. éƒ¨ç½²å®Œæˆï¼

### ç¯å¢ƒå˜é‡é…ç½®ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

```env
DATABASE_URL=your_production_database_url
NEXTAUTH_URL=https://your-domain.com
NEXTAUTH_SECRET=your_production_secret
RESEND_API_KEY=your_production_resend_key
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ”§ å¼€å‘å·¥å…·è„šæœ¬

```bash
# å¼€å‘æ¨¡å¼
npm run dev

# ç”Ÿäº§æ„å»º
npm run build

# ä»£ç æ ¼å¼åŒ–
npm run lint

# æ•°æ®åº“é‡ç½®
npm run db:reset

# å¡«å……åˆå§‹æ•°æ®
npm run seed
```
